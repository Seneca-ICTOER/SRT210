<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-A-Labs/lab5">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/SRT210/img/pwa/icon-512x512.png">
<link rel="manifest" href="/SRT210/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/SRT210/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/SRT210/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/SRT210/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Lab 5 | SRT210 - Infrastructure Administration</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//SRT210/A-Labs/lab5"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 5 | SRT210 - Infrastructure Administration"><meta data-rh="true" name="description" content="Lab 5"><meta data-rh="true" property="og:description" content="Lab 5"><link data-rh="true" rel="icon" href="/SRT210/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//SRT210/A-Labs/lab5"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SRT210/A-Labs/lab5" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SRT210/A-Labs/lab5" hreflang="x-default"><link rel="stylesheet" href="/SRT210/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/SRT210/assets/js/runtime~main.c7913e5e.js" as="script">
<link rel="preload" href="/SRT210/assets/js/main.beb789c5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/SRT210/"><div class="navbar__logo"><img src="/SRT210/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/SRT210/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SRT210 - Infrastructure Administration</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SRT210/">Welcome to SRT210</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SRT210/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/SRT210/A-Labs/lab1">Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SRT210/A-Labs/lab1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SRT210/A-Labs/lab2">Lab 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SRT210/A-Labs/lab3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SRT210/A-Labs/lab4">Lab 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SRT210/A-Labs/lab4-part2">Lab 4 Part 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/SRT210/A-Labs/lab5">Lab 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SRT210/A-Labs/lab6">Lab 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SRT210/A-Labs/lab7">Lab 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SRT210/A-Labs/lab8">Lab 8</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SRT210/B-Assignments/assignment1">Assignments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SRT210/C-ExtraResources/first-half-review">Extra Resources</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/SRT210/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Labs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 5</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 5</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="objectives">Objectives<a class="hash-link" href="#objectives" title="Direct link to heading">​</a></h2><ul><li>Understand how DHCP works and set up a working server/client.</li><li>Understand which types of traffic can be captured where, from the point of view of an attacker.</li><li>Practice capturing traffic, and browsing it using Wireshark.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-prerequisites">Part 1: Prerequisites<a class="hash-link" href="#part-1-prerequisites" title="Direct link to heading">​</a></h2><ul><li>In order to do this lab and the ones to follow you need to make sure that you&#x27;ve completed assignment 1 successfully, which in turn requires that you&#x27;ve completed labs 1 through 4.</li><li>Your c7host should have at least 8GB of RAM allocated to it. Your four nested VMs should be reconfigured to use no more than 1GB of memory (1024MB). That way when we create more nested VMs we won&#x27;t run out of memory.</li><li>If you&#x27;ve completed the labs correctly, this is what the iptables configuration should look like on your c7host (except the &quot;35&quot; which will be different for all of you):</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@c7host ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># iptables -L -v</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Chain INPUT </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">policy ACCEPT </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> packets, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pkts bytes target     prot opt </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain">     out     </span><span class="token builtin class-name">source</span><span class="token plain">               destination         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">50</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3260</span><span class="token plain"> ACCEPT     udp  --  virbr1 any     anywhere             anywhere             udp dpt:domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     tcp  --  virbr1 any     anywhere             anywhere             tcp dpt:domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     udp  --  virbr1 any     anywhere             anywhere             udp dpt:bootps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     tcp  --  virbr1 any     anywhere             anywhere             tcp dpt:bootps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     udp  --  virbr2 any     anywhere             anywhere             udp dpt:domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     tcp  --  virbr2 any     anywhere             anywhere             tcp dpt:domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     udp  --  virbr2 any     anywhere             anywhere             udp dpt:bootps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     tcp  --  virbr2 any     anywhere             anywhere             tcp dpt:bootps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">294</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31177</span><span class="token plain"> ACCEPT     all  --  any    any     anywhere             anywhere             state RELATED,ESTABLISHED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     icmp --  any    any     anywhere             anywhere            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">469</span><span class="token plain"> ACCEPT     all  --  lo     any     anywhere             anywhere            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     tcp  --  any    any     anywhere             anywhere             state NEW tcp dpt:ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">576</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">87997</span><span class="token plain"> REJECT     all  --  any    any     anywhere             anywhere             reject-with icmp-host-prohibited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Chain FORWARD </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">policy ACCEPT </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> packets, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pkts bytes target     prot opt </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain">     out     </span><span class="token builtin class-name">source</span><span class="token plain">               destination         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">869</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">71173</span><span class="token plain"> ACCEPT     all  --  any    virbr1  anywhere             </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24     ctstate RELATED,ESTABLISHED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">885</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">66577</span><span class="token plain"> ACCEPT     all  --  virbr1 any     </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24     anywhere            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     all  --  virbr1 virbr1  anywhere             anywhere            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> REJECT     all  --  any    virbr1  anywhere             anywhere             reject-with icmp-port-unreachable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> REJECT     all  --  virbr1 any     anywhere             anywhere             reject-with icmp-port-unreachable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     all  --  virbr2 virbr2  anywhere             anywhere            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> REJECT     all  --  any    virbr2  anywhere             anywhere             reject-with icmp-port-unreachable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> REJECT     all  --  virbr2 any     anywhere             anywhere             reject-with icmp-port-unreachable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> REJECT     all  --  any    any     anywhere             anywhere             reject-with icmp-host-prohibited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Chain OUTPUT </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">policy ACCEPT </span><span class="token number" style="color:#36acaa">418</span><span class="token plain"> packets, </span><span class="token number" style="color:#36acaa">34375</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pkts bytes target     prot opt </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain">     out     </span><span class="token builtin class-name">source</span><span class="token plain">               destination         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     udp  --  any    virbr1  anywhere             anywhere             udp dpt:bootpc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ACCEPT     udp  --  any    virbr2  anywhere             anywhere             udp dpt:bootpc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@c7host ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># iptables -L -v -t nat</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Chain PREROUTING </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">policy ACCEPT </span><span class="token number" style="color:#36acaa">1448</span><span class="token plain"> packets, 149K bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pkts bytes target     prot opt </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain">     out     </span><span class="token builtin class-name">source</span><span class="token plain">               destination         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Chain INPUT </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">policy ACCEPT </span><span class="token number" style="color:#36acaa">24</span><span class="token plain"> packets, </span><span class="token number" style="color:#36acaa">1671</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pkts bytes target     prot opt </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain">     out     </span><span class="token builtin class-name">source</span><span class="token plain">               destination         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Chain OUTPUT </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">policy ACCEPT </span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> packets, </span><span class="token number" style="color:#36acaa">19649</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pkts bytes target     prot opt </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain">     out     </span><span class="token builtin class-name">source</span><span class="token plain">               destination         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Chain POSTROUTING </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">policy ACCEPT </span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> packets, </span><span class="token number" style="color:#36acaa">19649</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pkts bytes target     prot opt </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain">     out     </span><span class="token builtin class-name">source</span><span class="token plain">               destination         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">336</span><span class="token plain"> RETURN     all  --  any    any     </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24     base-address.mcast.net/24 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> RETURN     all  --  any    any     </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24     </span><span class="token number" style="color:#36acaa">255.255</span><span class="token plain">.255.255     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> MASQUERADE  tcp  --  any    any     </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24    </span><span class="token operator" style="color:#393A34">!</span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24     masq ports: </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain">-65535</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">883</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">66409</span><span class="token plain"> MASQUERADE  udp  --  any    any     </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24    </span><span class="token operator" style="color:#393A34">!</span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24     masq ports: </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain">-65535</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">84</span><span class="token plain"> MASQUERADE  all  --  any    any     </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24    </span><span class="token operator" style="color:#393A34">!</span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.210.0/24</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The asg1 network must be an isolated network, with access to the network1 network and the internet via lin1a1 which is configured as a router.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-dhcp">Part 2: DHCP<a class="hash-link" href="#part-2-dhcp" title="Direct link to heading">​</a></h2><p>So far we&#x27;ve used either DHCP provided by the virtualisation systems (Vmware/KVM) or static IP addresses. In this lab we&#x27;ll set up a DHCP server on the asg1 network.</p><p>There are many websites that describe the operation of DHCP, <a href="https://www.netmanias.com/en/post/techdocs/5998/dhcp-network-protocol/understanding-the-basic-operations-of-dhcp" target="_blank" rel="noopener noreferrer">here is a good one</a>. You&#x27;re not expected to understand the details of the contents of every packet, but you should understand the overall process of requesting and assigning an IP address in a DHCP environment.</p><ul><li>Install the DHCP server on lin2a1. The package is named dhcp.</li><li>It doesn&#x27;t come with a working configuration file. You&#x27;ll need to put in your own configuration into /etc/dhcpd.conf. You can start with something like this (note that your subnet will be different from this one):</li></ul><p><img loading="lazy" alt="DHCP Config Pic" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYcAAAECCAYAAAAVYxsVAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AABX6SURBVHic7d1rkqS4DoBRqqMXUSvLZdRichm5yZ4/l7wuvyTZ8oPkOxETMV2ALQxYiXl9PZ/Pfz8/PwcAAKc/qwMAAOznb/iP1+v1a+Lj8ZgazBlDrt44tuNI4wvnKcV+zmNdN039lnJ66n88Htlydth+ktL2/ZT6c/ugZr+cZXV8O7VFbOfYVsieOTwej2WJofb3M67cTn1OHxmXVL+2nJ76c/8+1bbb6/V6Lxf+/0wr6pxdf679d+poVse3U1uESsfYnf2VZ/ksLTunxw7ds7OF9e96cK3w6WchvXaPb1fhmfmdqZJDmFVLp17SsEttejytdehFIsVeWz8pPuksZuUvkrDO+P+1bWzdvrVpHtu3VGYuBk391mHD3PzabWut37p/7hpfz77v0b9Y2o+kehxf4d1KtYO2NuZd25k002t/K5UVxlKaN0dTh2U+Sx3a5Xu1bI+e8jTzS8tYaLZV6/6libVnf8/No6lfu3/uGt/I/a83vitcq1vBPKx054bTJs878PxVaDFrG7ScNWqODe3x03qc7RjfiB9E3mXN+NF2Nc3XHO7WiJZfandLFLPWXzqAR++Tu3cgu8eHa7n0cw6zDoKrH3S1aw5XsXobrK5fsnt8uJ5tk8Prlb/d8vH4fTvpKqX4dlS626n3gnDvBcaeC6S95Vumr+h4R7dPr1H7v7bcKx1/V5W9IH0qDRNox3tb7gYp3U2gWV57sbpWvuaCVa6M2gW9Uvy5GHto16+1s41pL2iWyrFckJTmHbl/WesvXdCNy8z9uxT/leOT6s/Fqbmm1VI/F6T1vni3ErC/3YeNdo8PdtsOKwEA1iE5AJvb/SaC3eNDm9u9PgO4mt2HanaPD204cwAAJEgOAIAEyQEAkHgnh/ihHy4sAcB9ceYAAEh8PZ/Pf9/f38UZuBMBAO7nz3GMefcOAOC6GFYCACRIDgCABNccAAAJrjkAABIMKwEAEu8X73HGAAA4ceYAAEiQHAAACZIDACBBcgAAJEgOAICEy2dCc6/3Du94Oqdr/xaXUXp9uOWuKinGT1BqvxHll8rObdedvF6vamwr4+9tX83ygJbL9xxyt8FavwcR7vRxGXH51jrisltj3Fmt/bzL9y57lp1j9mhfEgI8DRlW6um84zIgm91+tbLD5HRFO8T/ye2L6/h7HL878fj/V+6IXnU/Ho/32dBZZlx2bdgp7Hxzp+6lU/3SctbyW9WG7Hrrtw5rxNNydZbaUxNfbUgtniZtL2laPM+I7ec9bHSHYVX4mvpupbOD7jm9D5e3xBceyLXOojas1XrqP7p8z/pz00s/HmKacfJcMpBo2qc2ZBj/2i79+tbGb20/SW/7asv/5GFV+HO5IK0l/ZK1ltG6bHwWYYmpp/7R5Y/S0qGPjCXnyh3drPa9chthvqnJYRe5Yabz75YyWuodWf6d5H5o8Iu4jn0KFn+Oo37NYSXPYZWR65LrlHb4pb16+wG4riHXHHrHlOP/X6H1dl7tNRHPhLVj++1u9A+G3ZXW/+7tgv/7ej6f/35+fqp3j0ikOyFy5dX+FpdRuxNFSxtjb/2aO2F6yq+x3LFTmi7dgVOLz6P+uE5t/bXla/N5x1+6WF3j0b7SdO3dSjuc8WIP7+QAzEIHBOyPdythOIYqgOshOWA46/UYAOvd8lZWzEcyAK6FMwcAQILkAABIMKz0Abxe9jbD6lhz9a+OyWJ1/Du31c6xeZi9fi7fc8BaVzoQVsdqeeHejlbHv2tb3eEVKrPbnmGlitU72Or6e62Of3X9va4e/yq7JrCr2eZ7Dj1PMGum98SjefpV8wR0/LSv5klrTfmlZTVPn2vjs7Zv6dUMlvln1p+bz3P7Wp+g3i1+S/21mHL1e8VXKrs3Pulpe+kp/tpQYO1tAJZ18O7/jsPp9Rm9pNdr9E7vjcf679o8tZi19XuXLy1vbV/r9vLevj3lta5/yw+IluS+Kv6e/sFj+2riCdffwmv7SsuWaI8JbaxSfFpbXJA+Gyc8U6k1eonHaXhLo2rj15Sbq9+jfG3bWH+Nl+bx3lFjrR1ra7mt84X1l/7ueaCPjH/G9mstyyPG2v4dHoPh3zTLluL06K9C3uVtkRyOI2383EaWNnzvDtezg2nij+e31G8tv1audkfW/K1Wz2yr6y8ptbvmVyHm0Ryz1rP4mbz3m62+5/B4rPuEoceB2RO/pv6V7SNZ3bGtrl8SxpfbhrvHj7V94wpTvyFdUjpdq22AeBnr9HjesF6rlvgt9feWP0IY04qObaf6NcKkEP/7CvF7lzuqfq964/mk5L4bj/bd4oL0cfTdzaCZLtWtHTI5y9WcSlqGEyz118qXLqDl4tdc0JPqH9l+o+u3tp81PskV4pe2Xzxf6e+99efWT7P/9sSnWVfN9tH8f209auvZs/+V8D0HwMHVh4WuHv/V7dj+PAQHAEiQHIBOV79QefX4r27X9mdYCQCQ4MwBAJAgOQAAEts8Ib0L6XmC0XcTzKzLShub5YnR2u2KANbhew6RltdGjK5/B9oOv9bBnw8Qhf/F02tlA5iHYSWY1Z7krk23lE2CANbiew5CDLX5LE/wnv+uDc30dIi9Txhr4iuVvVrLE8Kl4ayWYT3N8pqn5MNp1iecAW9bvD6j1tmW4rFMt8Ygdf61x+BL9Vv+3RO7dX0s8YTrr40j/HvM6wxESqqaVzxI7aGNQbN8z75RWwfA0xYXpM8OKDxTqR1UJa2/vC0HmvZgtBy0Iw5077J6YixtS+8z09r7alYPU3nUv3odcC9bJIfj+J0gzn/n5pHKAGKWu6d2rp/9GzPxPQcAQILvOQwyqn5tuSvWv7TdLLEwlq6zev/G59vigvRxrL9bSXPBOSzTejeJZXptG1gu+rbU33NBuhajZvu07nelfbe2DVsuAmtiCFm27+j9G7DixXuT8Iv4s3luX/YV7ICH4IDFGCLCjkgOE+x0SyX89W7fcGiJswbsgmElAECCMwcAQILkAABIkBwAAAm+5wAASHDmAABIfD2fz3/f39/FGbilDgDuZ4t3KwEA9sKwEgAgQXIAACS45gAASHDNAQCQYFgJAJB4f0OaMwYAwIkzBwBAguQAAEiQHAAACZIDACBBcgAAJEgOAIAEyQEAkCA5AAASJAcAQILkAABIkBwAAAmSAwAgQXIAACRIDgCABMkBAJAgOQAAEiQHAECC5AAASJAcAAAJkgMAIEFyAAAk/sZ/eL1e7/9/PB6mwnqW9Sr/9Xo11z06/hmk9T/XccX61do3nJabR5oOwFdy5tDbsZ7L5w7mXlJsvXVevbMZ0eZewv2jlBjOafE+JE0H4G/IsNLVO9lPluucR5t5tvJ6vUgagINfw0q1g8p6Wi8NG+SGDOJfhNrOJC57RGdkHfaYOWyiXf/SsE7u75ozwVGdvdS50/kD472TQ9gZaDqb8xdaPH9pzLu0rIfWpKIlrb80Tdt+rW2kXf/cti2ta+7fvdtQSqC5eazTOWsFfPw9Dn2nWjowSx2cZtlZarH3liFNO9unlEx6yvfsDOPtWEsUreWHZcXJpVa3ZjoAP8ndSjU7X6yWeHSiUuKThmDC8XDp7MoybZYZMUh17NAOwB3wnMNE3GlT55EYuCAN+GhODrsfhKPjs5Qfz6tJEL3x77T+AK7n6/l8/vv5+Uk6L8vdKtYLjVL5tYu01nosNHdUaaZb208zXcvyoFnuQrb0/63x9a6/pv6Zt8wCn+6dHAAAOHHNAQCQIDkAABIkBwBAguQAAEiQHAAACdMT0qP13Ia6C+l9Qytut5Re7VGax/tWUwDXsdWZw9U7k90fCou/h3AKE1bL9xSk6QCuZ6szhztYkQB3el8RD6oB1/DrrazHoX+ff+17DNLfW1iHNfieQrveN+xyxgBc39fz+fz3/f1dnUnT6Zc6s9ZXWEjJp1a+JpbSayI05Vti18yj7Ux749Msq22rMCZpOoDr+TWsVDvQNR9ZKb1grrY831P4XdbI7ymEZWgTQ2k631sAPpvqmoP2ewylX+G5f7fgewp9MfQkBm0MO7QTgH6udytZzjRW4E6avJmJgVd9A9fglhzi2xnDv41g6WRKw13SMFJP/KM7wauXD2Bvvy5Ia9/nX5svZL1oyvcUxn1PIa6nFlctxlL9fG8B+Cx8zwEAkNjqCWkAwB5IDgCABMkBAJAgOQAAEiQHAEDC/a2sO37PoFft9tQRde3WNh7rX7vVVfPqk9p06u+rH8hxTQ6f+tDUrHcF7dp+vetfeplfnAhHvZqD+nX1A6Hp33NgZ7yf1dv87vVbXPHMHmO8k4PmtDf3pHRuWc2TuJqndLX1a2jLr8VfmqaJzzKs0PNkubROudik+Gp1er8yfAbq3/MMFXtJXp9xkjpMqZMs0S7XUn9rndZ1s8bbus5a0sEuvcbCY32ssUqJM1d3aTr16+uUfiQAp1t8JvQ8KMIx1p6DIleehse4fS6WOK74/6W6Le0z4oyhdIZ2xiNNp357/Zw9QHKL5HAcvzvA898rYlixrDTEdE4b2T67DKXctf7T6vpxHbd6ziH8FcYvp5SmfVrab3XHePf6T9ohWI4NHMfA5LDTThbHskOCkNpnZvtZ28ej/cI6PdtCO+/d6wck71d2S3eraO9myXUypTIs5fdckLaUf/5dOxSjjc+j/UpKF4tLY8zW9aslDssNATnW9i1Nj+fTXPC9S/3a5Xc5w8Ee1N9zYMcBgPu41TUHAICOKjlob4kEAHwG1a2sDCUBwL0wrAQASJAcAAAJvufgzPpKg9lab3XU3krZWn9cR8utmJp6S8vvXj4wG99zcLT7+pfiK92bfyY6aXpv/aUYtPFp6x21frPaD5iJ7zncRE/i8thmrYnBw+h9Tirf4+V8wGy3+J6DZnlt/bV/5+qzlt8Sn4bnK0NaOrAdXlmiNTpGEgCu4BbfcwjnP5cpvWYiV7+2bsvfawnGGp+F5ZqDdl1669fU7TFmH5chJWdrHZplSQy4itu8svu08qDU/CLNxXd2WuEYtfd6aJLFzOGfEWP20vK1JOFdPrC72yWH04oDtLUjO/99djjWsjzcpWMbtX53aT98Dp5zuJDHY833KO7Sse2QGMIfAMBKt/iewwrS+lvaJ553dILQXjsqDT2t3O65+j1j8ip/dTsBklt8z8FyoVATX2kcPDefpnyP+CTSRV/rtinF0HrB23v/s9wNN7p8bfvd5QwN18D3HAAACa45AAASfM8BAJDgew4AgATDSgCABMkBAJC43fccarfazqyfobp7Gn2rbWv9cR3W+LT1Ssu3to81jlHlfxLXM4crXKy++wbHOqXjI+ywck/BS9N768/VYYlPW6+0fGv7aI0u/9PwPYfJ7r7+d9XT0XjsM9rEMELLg6reLA9yasq5w3F8i+851Oqw1F+KKbe85bS9d/00y2ufgNaunyU+zfIe+1/tF2/v/tW7/p6/Rls6qJ1+Defit8TXsg4t5d8hAdTc7nsOuVdfSPVLO5T2FRK1aZ7rZ41Be7C1vupB276a7Z9bRjuO7Fl+awdiGfOuzdfacdXWpVb3jGseUny5Y9Gr/bXT7+QWr+z22uClTiOsYxRt52FdPi6rdiBaz7zOcs6yXq/69yi0MbZqLV8bfw9Nspg5/BOub6nDDttDwzOxjTjeSAy/3SI5jNb6S9zCo1Psja8WgxRf2MGW5m8ZJrHoKV8T/0hX77g8f6CNcPX2HYHnHDDNeRZxHL4JNFfmiIN9VPySq3dcn5QYwh8In47vOaCJZfvG82o6WOv+E5apvfY1Mv4ePfGvPu609Y+K06vc1e24g1t8zyEXl2aopXY3S218XrqIOXL9pAv42vWQrj9YYovrzy2vaX9NvZYLvpbyR6y/NoZaJ6W9YG2tXxOD5maHWt1S/Zb4avVL5Wvb9+pncFZ8zwEAkOCaAwAgwfccAAAJvucAAEgwrAQASJAcAAAJkgMAIEFyAAAkSA4AgATJAQCQIDkAABIkBwBAguQAAEiQHAAACZIDACBBcgAAJEgOAIAEyQEAkCA5AAASJAcAQILkAABIkBwAAAnVZ0Il4XelR39S9PV6ddVxxhqXkfs2djiPNL23/rgOa3zaekvLjy5/lt79o7XOU2vdtfarfbf98XiI06m/r36rmf3hSC7JQdpAXnrrKC2f67Bfr9e7o5Gm99ZfikEbn7beUevn1T69ZuyDOb37v7b9pLbs7cyov3//rR3HV+OSHK6g5+D12NCticHDJ+yon2z19rl7/ch7JwfNaV3p36FSFj7/VjrlspxWtnSmmlNUrdX1jzbqDE2af9T+kSuzNk9ct1S/tE5Wq399Uv/+x+gMf4/D97TqPMDDZXN/swxraJJSjzA+ycgdt9RBleJrPeWtLT87MZxxzNo/cokkLCMuu1Ru7fgYlRisCYz62+vvWe5TzoT+Hke5Q2+VK09jZcbW/FKcOfwz4pqHtHzpF7xW7/La8lvFbRmWVyvbcnyMSAyljjKX2HLTqd9ev3Vfy/2oubr3sFL863TFyu3coKtPdWfpXb+R7TOqbGmI6Zw28vhYvX/dvf7T6vp38us5h9wpOvbZcUfbOTHsQHN8tBw/q/evu9d/Wl3/bv4cx/HrF9Fx7HHxVLoGoL1G0Fr3cchj16Whp93azTOm1eunjWPkOo9IELU6PddVO+/d68dxfD2fz38/Pz/FU+lTfHBoT8Xj5bV3i8TLl+LQsh7IpXWXYiwllpaORIrBcjF0dfmSkftHbiy5dv3Bun9LdUo0+9fI7Xf3+i3La7T2Ubt5JwcAAE68WwkAkCA5AAASJAcAQILkAABIkBwAAInbvJVVa/StoK31x3WMupW0tPzo9bt7/XEdV9u+veV73koKH9zKGigdnLV7s3P3xJeWaa1fKq+3/tXrd/f6pfJ237695Xu1L3xx5vA/PU9NeuzA0hOgXvXkzDgAVz+VyvYdZ2YHTtKYx/UzobknTeN5atO0y7c8oS3xfGVIyw68wytLtFpitKyfNM/o+iVsX93ypfYZsX3hz/UzoXEn/3rlX3Gcmxb/Lfy39tUKtTo8169m5C+bUoItxWeNQbP86AN3RcfB9i3PYzU6MXDGMI/7sFLrTuFhZB2aC4QzhwdqyTOe3lt++LdzvhFtLZU/sn62b3/7ahPDiu0Lu2HXHGoXl0Zt+JW/Ku4yFrp6/HpV+7J967Tts+v2RYrnHBzQccwpn8Qw1hUSg3b4D/0+NjmM3Ik0B0Op/tU7d65+z5hWr58Htq+t/J75sC+X5xysF7paLjJLdyP13q1U2pFL9Ut1l2IodTzW+jUxaO+ZX1V+OB/b97rbV9M+HvXf5QxuF5d8CI6dBADGusSwEqeoADDXJZJD/OxD+DcAgL/LvD6DZAAA81zizAEAMBfJAQCQeA8rxbeaAgDu633m8Hg8LvXmSADAOAwrAQASJAcAQCJJDrlnCgAA95I858BDZgAAhpUAAAmSAwAgQXIAACR4CA4AkHgnBxICAODEsBIAIEFyAAAkSA4AgATJAQCQIDkAABL/AUNYY95Ny0ZfAAAAAElFTkSuQmCC" width="391" height="258" class="img_ev3q"></p><ul><li>You should understand what all these parameters mean. In the screenshot the DHCP server will assign IP addresses in the range 192.168.35.100 - 192.168.35.200, and each client will receive the appropriate default gateway and DHS server.</li><li>To test this you&#x27;ll need a DHCP client on the asg1 network.</li><li>Start the DHCP service (named dhcpd) and once it starts without errors - configure it to start automatically on boot.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dhcp-clients">DHCP Clients<a class="hash-link" href="#dhcp-clients" title="Direct link to heading">​</a></h2><ul><li>Create a new nested VM on the asg1 network. Same minimal installation, but leave its network interface configured as a DHCP client.</li><li>It should have the hostname <code>alice</code>. For various scenarios later we&#x27;ll treat different machines as <code>bob</code> and <code>charlie</code>.</li><li>Boot up alice (or bring eth0 down and back up) and confirm that it&#x27;s been configured as expected based on your DHCP server&#x27;s configuration.</li><li>You should be able to use the internet on the new machine without any extra configuration, which is the whole point of DHCP.</li><li>Check the logs (/var/log/messages) on your DHCP server. You should see the expected four steps of the communication (discover, offer, request, and ack).</li><li>Notice also that the communication is made of broadcast messages targeted using the MAC address of the DHCP server and DHCP client, since for an obvious reason they cannot communicate using IP addresses.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-3-packet-capture">Part 3: Packet Capture<a class="hash-link" href="#part-3-packet-capture" title="Direct link to heading">​</a></h2><p>We&#x27;ll do some packet capturing to better help you understand routing and how it applies to security topics. To do this we&#x27;ll use the tcpdump command to capture traffic, and Wireshark to view it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wireshark">Wireshark<a class="hash-link" href="#wireshark" title="Direct link to heading">​</a></h3><ul><li>Wireshark can do many things, we&#x27;ll just use it as a GUI to display the traffic we captured. Since we only have one machine with a graphical interface (c7host) - install it in there. The package is called wireshark-gnome.</li><li>You can run it now, but we won&#x27;t use it until we have something to display, in the next section.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dhcp-traffic">DHCP traffic<a class="hash-link" href="#dhcp-traffic" title="Direct link to heading">​</a></h3><ul><li>You should already have a DHCP server and client on the asg1 network. Install tcpdump on the server, and run it like this:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tcpdump -i eth0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The tool will print a bit of information about the traffic that it sees (not all the details, but enough for now).</li><li>Leave this window visible and switch to the alice VM. Bring its network interface down and back up. Since it&#x27;s configured to be a DHCP client - this will result in a DHCP request.</li><li>Back in the DHCP server window you should have noticed some extra output when you did the step above. You can kill it now with Ctrl+c and look at that output. You should notice at least a couple of BOOTP/DHCP lines related to what you just did.</li><li>Now rerun tcpdump, but this time save the traffic in a Wireshark-compatible format:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tcpdump -i eth0 -w dhcpserver.pcap</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Bring your interface down and back up in the alice VM, and kill tcpdump.</li><li>The dhcpserver.pcap file will not be human-readable, it&#x27;s intended to be viewed with Wireshark. So copy the file to c7host using the scp command.</li><li>Open dhcpserver.pcap in Wireshark, and browse through the DHCP packets, looking specifically for MAC and IP addresses.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-traffic">Apache traffic<a class="hash-link" href="#apache-traffic" title="Direct link to heading">​</a></h3><ul><li>It is generally accepted that no website using authentication should run over plain-text (http://) but many do, and in this section we&#x27;ll see why that&#x27;s a bad idea.</li><li>There are quite a few steps to set everything up, but essentially you&#x27;ll be doing the same thing here as you did for the DHCP traffic above.</li><li>First reconfigure your website on lin1 to require authentication. To do that:<ul><li>Edit /etc/httpd/conf/httpd.conf, and find the section for the /var/www/html directory. In that section replace</li></ul></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AllowOverride None</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>with</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AllowOverride All</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Then restart Apache.</li></ul><ul><li>Go to the /var/www/html directory and create a couple of files. The first one (.htaccess) will require credentials when visitors access the webpage:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AuthUserFile /var/www/html/.htpasswd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AuthGroupFile /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AuthName </span><span class="token string" style="color:#e3116c">&quot;Please Enter Password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AuthType Basic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Require valid-user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>And the second one (.htpasswd) will have the credentials (andrew/test):</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">andrew:PGwvUbWUtmzqE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Test that your changes worked by accessing lin1.yourusername.ops using Firefox on c7host. It should prompt for credentials and let you see your page when you give it the username andrew and password test.</li><li>Now we&#x27;ll need to install a GUI on the alice machine so that we can do our packet capture on the router:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum groupinstall </span><span class="token string" style="color:#e3116c">&quot;GNOME Desktop&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Then make it start automatically</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -sf /lib/systemd/system/runlevel5.target /etc/systemd/system/default.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>and reboot.</li></ul><ul><li>This time the traffic will be between alice and lin1, and we&#x27;ll do the packet capture on lin1a1, which is the gateway out of the asg1 network:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tcpdump -i eth1 tcp -w gatewaytcp.pcap</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Which will capture all TCP traffic going through the gateway, including the communication we want to sniff.</li><li>Open Firefox in the alice machine, close the extra tabs, and go to lin1.yourusername.ops. Type in the username and password to see your webpage.</li><li>Stop the packet capturing on the gateway, scp the gatewaytcp.pcap file to c7host, and open it with wireshark.</li><li>Look for a line with GET / HTTP/1.1 in the info column, and an &quot;Authorization&quot; line in the Hypretext Transfer Protocol section of that packet.</li><li>With just a bit of browsing you should be able to find the username and password you&#x27;ve typed in when you logged in. Notice that no cracking of brute-forcing was needed.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-completion">Lab Completion<a class="hash-link" href="#lab-completion" title="Direct link to heading">​</a></h2><ul><li>Make sure you understand what you&#x27;ve done in this lab, so that you&#x27;re ready to answer questions about it.</li><li>Have notes in your labbook from this lab.</li><li>Show your work to the professor and have them sign your labbook.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/SRT210/tree/main/docs/A-Labs/lab5.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/SRT210/A-Labs/lab4-part2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 4 Part 2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/SRT210/A-Labs/lab6"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 6</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objectives" class="table-of-contents__link toc-highlight">Objectives</a></li><li><a href="#part-1-prerequisites" class="table-of-contents__link toc-highlight">Part 1: Prerequisites</a></li><li><a href="#part-2-dhcp" class="table-of-contents__link toc-highlight">Part 2: DHCP</a></li><li><a href="#dhcp-clients" class="table-of-contents__link toc-highlight">DHCP Clients</a></li><li><a href="#part-3-packet-capture" class="table-of-contents__link toc-highlight">Part 3: Packet Capture</a><ul><li><a href="#wireshark" class="table-of-contents__link toc-highlight">Wireshark</a></li><li><a href="#dhcp-traffic" class="table-of-contents__link toc-highlight">DHCP traffic</a></li><li><a href="#apache-traffic" class="table-of-contents__link toc-highlight">Apache traffic</a></li></ul></li><li><a href="#lab-completion" class="table-of-contents__link toc-highlight">Lab Completion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">SRT210 - Infrastructure Administration</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/SRT210/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Seneca College.</div></div></div></footer></div>
<script src="/SRT210/assets/js/runtime~main.c7913e5e.js"></script>
<script src="/SRT210/assets/js/main.beb789c5.js"></script>
</body>
</html>